<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 3A: IMAGE WARPING and MOSAICING!</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    
    <!-- MathJax for rendering mathematical equations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    
    <style>
        .equation-container {
            margin: 2rem 0;
            padding: 1.5rem;
            background-color: #f5f5f5;
            border-radius: 8px;
            overflow-x: auto;
        }
        
        .equation-container .MathJax {
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <h1><a href="../index.html" class="home-link">Yiqin Huang</a></h1>
            <a href="../index.html#projects">Back to Projects</a>
        </nav>
    </header>

    <main class="container project-page">
        <h2>Project 3A: IMAGE WARPING and MOSAICING!</h2>
        
        <hr>
        
        <section>
            <h3>Overview</h3>
            <p>
                This project implements image mosaicing by capturing multiple photographs and seamlessly stitching them into panoramic images. 
                The process involves computing homographies between image pairs to establish geometric correspondences, 
                then applying projective warping and resampling to align the images into a common frame. Through careful compositing, 
                the warped images are blended to create wide angle mosaics that exceed the field of view of individual photographs, 
                demonstrating the core principles behind modern panoramic photography.
            </p>
        </section>
        
        <hr>

        <section>
            <h3>A.1: Shoot the Pictures</h3>
        
            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/IMG_5051.png" class="profile-pic">
                    <figcaption>Left Image</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/IMG_5051.png" class="profile-pic">
                    <figcaption>Right Image</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/street_left.png" class="profile-pic">
                    <figcaption>Left Image</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/street_right.png" class="profile-pic">
                    <figcaption>Right Image</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/building_left.png" class="profile-pic">
                    <figcaption>Left Image</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/building_right.png" class="profile-pic">
                    <figcaption>Right Image</figcaption>
                </figure>
            </div>

            <p>
                Note: Either Left or Right image is used as the fixed center of projection for the Mosaic
            </p>

        </section>

        <hr>

        <section>
            <h3>A.2: Recover Homographies</h3>
            <p>
                The homography transformation is computed by solving the following system of linear equations (for one correspondence pair in the form Ah = b):
            </p>
            
            <div class="equation-container">
                $$
                \begin{bmatrix}
                x & y & 1 & 0 & 0 & 0 & -ux & -uy \\
                0 & 0 & 0 & x & y & 1 & -vx & -vy
                \end{bmatrix}
                \times
                \begin{bmatrix}
                h_1 \\ h_2 \\ h_3 \\ h_4 \\ h_5 \\ h_6 \\ h_7 \\ h_8
                \end{bmatrix}
                =
                \begin{bmatrix}
                u \\ v
                \end{bmatrix}
                $$
            </div>

            <p>
                Where (x, y) are the coordinates in the source image and (u, v) are the corresponding coordinates in the destination image. 
                This system is solved using multiple point correspondences to determine the homography parameters h₁ through h₈. For homographies, 
                since there are 8 degrees of freedom, we need a minimum of 4 pairs of correspondences (2 equations each pair). However, it is better to
                use more than 4 correspondence points and solve a overdefined system of equations (Ah = b) for h using least squares. This accounts for slight errors in correspondence points.
            </p>

            <h4>Examples of Correspondences</h4>

            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/labeled_left.png" class="profile-pic">
                    <figcaption>Left Image Correspondences</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/labeled_right.png" class="profile-pic">
                    <figcaption>Right Image Correspondences</figcaption>
                </figure>
            </div>

            <p>
                Plug these correspondences into the Ah = b equation above and solving for the optimal h using least squares. Reshape h into the 3x3 homography matrix H:
            </p>

            <div class="equation-container">
                $$
                \begin{bmatrix}
                1.40257957 & -0.01136527 & -310.541182 \\
                0.26268662 & 1.25978674 & -127.907641 \\
                0.00055852 & 0.00000293 & 1.00000000
                \end{bmatrix}
                $$
            </div>

        </section>

        <section>
            <h3>A.3: Warp the Images</h3>

            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/warp_cookie.png" class="profile-pic">
                    <figcaption>Original Image: Cookie</figcaption>
                </figure>
            </div>

            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/cookie_unwarp_homography_nn.png" class="profile-pic">
                    <figcaption>Warped Nearest Neighbor</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/cookie_unwarp_homography_bl.png" class="profile-pic">
                    <figcaption>Warped Bilinear Interpolation</figcaption>
                </figure>
            </div>

            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/warped_noodle.png" class="profile-pic">
                    <figcaption>Original Image: Noodle</figcaption>
                </figure>
            </div>

            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/noodle_unwarp_homography_nn.png" class="profile-pic">
                    <figcaption>Warped Nearest Neighbor</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/noodle_unwarp_homography_bl.png" class="profile-pic">
                    <figcaption>Warped Bilinear Interpolation</figcaption>
                </figure>
            </div>

            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/warp_poster.png" class="profile-pic">
                    <figcaption>Original Image: Poster</figcaption>
                </figure>
            </div>

            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/poster_nn.png" class="profile-pic">
                    <figcaption>Warped Nearest Neighbor</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/poster_bl.png" class="profile-pic">
                    <figcaption>Warped Bilinear Interpolation</figcaption>
                </figure>
            </div>

            <h4>
                Discussion
            </h4>
            <p>
                Both nearest neighbor and bilinear interpolation methods worked well. However, bilinear interpolation
                offers subtle improvements. In the "Poster" image example, the borders of the Japanese characters
                in the bilinear interpolation method are clearer than in the nearest neighbor method. The nearest neighbor
                method makes these borders slightly more blurry and less clearly defined. Nonetheless, the nearest neighbor
                interpolation method is almost two times as fast, making it good enough if speed is a priority.
            </p>

        </section>

        <hr>

        <section>
            <h3>A.4: Blend the Images into a Mosaic</h3>

            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/IMG_5051.png" class="profile-pic">
                    <figcaption>Left Image Campanile</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/IMG_5051.png" class="profile-pic">
                    <figcaption>Right Image Campanile</figcaption>
                </figure>
            </div>
            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/campanile.png" class="pic">
                    <figcaption>Campanile Mosaic</figcaption>
                </figure>
            </div>

            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/street_left.png" class="profile-pic">
                    <figcaption>Left Image Street</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/street_right.png" class="profile-pic">
                    <figcaption>Right Image Street</figcaption>
                </figure>
            </div>
            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/street.png" class="pic">
                    <figcaption>Street Mosaic</figcaption>
                </figure>
            </div>

            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/building_left.png" class="profile-pic">
                    <figcaption>Left Image Building</figcaption>
                </figure>
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/building_right.png" class="profile-pic">
                    <figcaption>Right Image Building</figcaption>
                </figure>
            </div>
            <div class="results-gallery">
                <figure>
                    <img src="https://Yiqinh.github.io/pictures/proj_3/building.png" class="pic">
                    <figcaption>Building Mosaic</figcaption>
                </figure>
            </div>


        </section>

    </main>

    <footer>
        <p>&copy; 2025 Yiqin Huang. All rights reserved.</p>
    </footer>
</body>
</html>